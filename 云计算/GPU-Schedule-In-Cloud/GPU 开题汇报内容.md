# 1. 概述
“云原生”是今年最火的词之一，在云上有非常多可以做的事情。GPU是一种非常特殊资源，昂贵、功耗高、共享能力差、拓扑敏感（下面描述到）。但是，目前云平台上GPU利用率并不高，如果能提高平台上GPU利用率讲是一件非常有实际意义事情。

本人准备做的是讲GPU任务调度到合适节点上，考虑的因素有批量调度、拓扑敏感、弹性调度。批量调度是一组多GPU任务，要么全调度，要目一个也不调度。拓扑敏感指的是GPU之间的拓扑结构对任务性能影响很大，劲量将任务调度到相邻节点上。弹性调度是“云原生”的基本功能，指的是任务能根据当前集群GPU负载情况动态申请GPU数量。其中，实现的重点是弹性调度，因为目前没有任何一款针对云平台上针对GPU通用任务的弹性调度，并且实现的技术路线比较清楚。

该调度器的应用场景主要是云上对GPU资源有需求场景，主要有云游戏（如Google今年年初发布的Stadia，腾讯即将发布的START），另外是深度学习领域（如云端学习、边缘计算）。

另外，该领域非常新并且有非常多领域可以做，比如2018年Kubernetes才在容器云中取得统治地位，阿里已经实现全面使用容器。但是kubernetes没有提供对GPU任务的专门支持，默认的GPU调度有非常多的问题。目前GitHub社区上容器云提供GPU调度提供专门支持的热门项目只有kube-batch,但是现在只有小版本，并且没有拓扑感知和弹性调度的功能。

总的来说，研究云上弹性调度的优势是占了先机的优势，社区项目一大半时间在PR（Pull Request）的争论中，并且目前还不支持现弹性调度功能。

# 2. 研究背景
## 2.1 应用场景
### 2.1.1 云游戏
随着视屏编解码技术发展和5G时代的到来，云游戏厂商纷纷推出自身的云游戏平台占据市场，比如Google今年发布的Stadia，国内Tencent也即将发布自己的START平台。如果云游戏平台成功落地，相信对游戏市场影响深远。

#### 2.1.1.1 成本
云游戏GPU成本一定非常高，如下图所示，是今年11月份腾讯开发者大会上腾讯音视频实验室提供的一份START成本构成图，图中显示是带宽成本第一占34%，GPU成本第二占27%。但是改图是腾讯做视屏编解码技术提出的，但是视屏编解码有很大一部分是专利费用，并且google已经开源了其vpx系列，未来的视屏编解码成本相信会降低。还有GPU功耗是单独算在“机架、电力部分”。
![](images/2019-11-20-10-19-19.png)

#### 2.1.1.2 Wine在容器中使用GPU
* 不需要额外配置Wine-Staging提供对GPU直接支持（https://wiki.winehq.org/Wine-Staging_CUDA）。
* 该项目实现Wine在容器中使用GPU资源。https://github.com/scottyhardy/docker-wine
* CrossOver 运行在docker中。https://github.com/john-shine/Docker-CodeWeavers_CrossOver-VNC

### 2.1.2 训练
随着云计算的发展，越来越多企业开始退出自己的深度学习训练平台，来降低深度学习门槛和成本，典型的如青云、paddlepaddle以及中科院的诸葛·深知。

* 商汤的数据

# 3. 研究内容
## 3.1 批量调度

# 4. 研究价值
# 5. 目前现状
# 6. 实现路线
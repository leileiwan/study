<!-- TOC -->

- [1. 背景](#1-背景)
    - [1.1 ZMQ是什么](#11-zmq是什么)
    - [1.2 ZMQ特点](#12-zmq特点)
- [2. ZMQ 三种消息模式](#2-zmq-三种消息模式)
    - [2.1 Request-Reply（请求-应答模式）](#21-request-reply请求-应答模式)

<!-- /TOC -->

# 1. 背景
## 1.1 ZMQ是什么
* 普通的socket是端到端（1:1）的关系，ZMQ是N:M的关系
* socket的连接需要显式地建立连接，销毁连接，选择协议（TCP/UDP）和错误处理，ZMQ屏蔽了这些细节，他像是一个封装了的socket库，他让网络编程变得更加简单
* ZMQ不光用于主机与主机间的socket通信，还可以是线程和进程间的通信。

* 可以使用套接字创建多种消息模型，如“请求-应答模型”，“发布-订阅模型”，“分布式模型”等。

## 1.2 ZMQ特点
* ZMQ的组件来去自如，ZMQ会负责自动重连，服务端客户端可以随意的退出网络。TCP的话，必须先有服务端启动，在启动客户端，否则程序会报错。
* ZMQ会在必要的情况下将消息放入队列中保存，一旦建立了连接就开始发送。
* ZMQ有阈值机制，当队列满时，可以自动阻塞发送者，或者丢弃部分消息。
* ZMQ会在后台线程异步地处理I/O操作，它使用一种不会死锁的数据结构来存储消息。


# 2. ZMQ 三种消息模式
## 2.1 Request-Reply（请求-应答模式）
* 服务端和客户端谁先启动，效果都是一样的。
* 服务端在收到消息之前，会一直阻塞，等待客户端连上来。